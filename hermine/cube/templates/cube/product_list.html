<!--
SPDX-FileCopyrightText: 2021 Hermine-team <hermine@inno3.fr>
SPDX-FileCopyrightText: 2022 Martin Delabre <gitlab.com/delabre.martin>

SPDX-License-Identifier: AGPL-3.0-only -->

{% extends "cube/cube.html" %}
{% block title %}Products{% endblock %}
{% block pagetitle %}Products{% endblock %}

{% block breadcrumbs %}
  <li>Products</li>
{% endblock %}

{% block actions %}
  <a class="button is-info is-inverted" href="/admin/cube/product/add/">
    <span class="icon">
      <i class="fas fa-plus"></i>
    </span>
    <span>Create a new product</span>
  </a>
{% endblock %}

{% block herozone %}
  <h1 class="title">
    <span class="icon is-medium">
      <i class="fas fa-cubes"></i>
    </span>
    Products
  </h1>
{% endblock %}

{% block content %}

<section class="card">
  <header class="card-header">
    <p class="card-header-title">
      <span class="icon">
        <i class="fas fa-book"></i> 
      </span>
      Getting started with your products
    </p>
  </header>
  <div class="card-content">
    <p>A product is a piece of software that you develop internally. Each product contain :
      <ul>
        <li>A “release” : a version of a product.</li>
        <li>A “component” : a third party FOSS component used by you</li>
      </ul>
    </p>

  </div>
</section>


  <div class="card has-table">
    <header class="card-header">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-award"></i></span>
        {{product|length}} products
      </p>
    </header>

    <div class="card-content">
      <div class="b-table has-pagination">
        <div class="table-wrapper has-mobile-cards">

          {% if product|length >= 1 %}

            <table class="table is-striped is-hoverable">
              <thead>
                <tr>
                  <th>Product name</th>
                  <th>Categories</th>
                  <th>Description</th>
                  <th>Owner</th>
                  <th># of releases</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
            {% for product in object_list %}
                <tr>
                  <td><a href="{% url 'cube:product_detail' product.id %}">{{product.name}}</a></td>
                  <td> {% for category in product.category_set.all %} <span class="tag is-dark">{{ category }}</span> {% endfor %}</td>
                  <td> {{ product.description|truncatechars:50 }}</td>
                  <td>{{product.owner}}</td>
                  <td>{{product.releases.all|length}}</td>
                  <td><a href="{% url 'cube:product_detail' product.id %}"><i class="fas fa-info-circle"></i></a> |
                    <a href="/admin/cube/product/{{product.id}}" target="_blank"><i class="far fa-edit"></i></a></td>
                </tr>
              </a>
            {% endfor %}
            </tbody>
            </table>

            <div class="notification">
              <nav class="pagination" role="navigation" aria-label="pagination">
                {% if page_obj.has_previous %}
                  <a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                {% else %}
                  <a class="pagination-previous is-disabled" aria-disabled="true" disabled title="This is the first page">First page</a>
                {% endif %}
            
                <span class="pagination-list">
                  Page {{ licenses.number }} of {{ licenses.paginator.num_pages }}.
                </span>
            
                {% if page_obj.has_next %}
                <a class="pagination-next" href="?page={{ page_obj.next_page_number }}">Next</a>
                {% else %}
                  <a class="pagination-next is-disabled" disabled aria-disabled="true" title="This is the last page">Last page</a>
                {% endif %}
              </nav>
            </div>

            {% else %}
              <div class="card has-table">
                <div class="card-content">
                  <section class="section">
                    <div class="content has-text-grey has-text-centered">
                      <p>
                        <span class="icon is-large"><i class="fas fa-surprise fa-2x"></i></span>
                      </p>
                      <p>Nothing's here…</p></div>
                  </section>
                </div>
              </div>
            {% endif %}

          </div>
        </div>
      </div>
    </div>
    


{% endblock %}


